!function(e,s,t){var r="JSSocials",a=function(e,t){return s.isFunction(e)?e.apply(t,s.makeArray(arguments).slice(2)):e},i=/(\.(jpeg|png|gif|bmp|svg)$|^data:image\/(jpeg|png|gif|bmp|svg\+xml);base64)/i,n=/(&?[a-zA-Z0-9]+=)?\{([a-zA-Z0-9]+)\}/g,h={G:1e9,M:1e6,K:1e3},o={};function l(e,t){var a=s(e);a.data(r,this),this._$element=a,this.shares=[],this._init(t),this._render()}l.prototype={url:"",text:"",shareIn:"blank",showLabel:function(e){return!1===this.showCount?e>this.smallScreenWidth:e>=this.largeScreenWidth},showCount:function(e){return!(e<=this.smallScreenWidth)||"inside"},smallScreenWidth:640,largeScreenWidth:1024,resizeTimeout:200,elementClass:"jssocials",sharesClass:"jssocials-shares",shareClass:"jssocials-share",shareButtonClass:"jssocials-share-button",shareLinkClass:"jssocials-share-link",shareLogoClass:"jssocials-share-logo",shareLabelClass:"jssocials-share-label",shareLinkCountClass:"jssocials-share-link-count",shareCountBoxClass:"jssocials-share-count-box",shareCountClass:"jssocials-share-count",shareZeroCountClass:"jssocials-share-no-count",_init:function(e){this._initDefaults(),s.extend(this,e),this._initShares(),this._attachWindowResizeCallback()},_initDefaults:function(){this.url=e.location.href,this.text=s.trim(s("meta[name=description]").attr("content")||s("title").text())},_initShares:function(){this.shares=s.map(this.shares,s.proxy(function(e){"string"==typeof e&&(e={share:e});var t=e.share&&o[e.share];if(!t&&!e.renderer)throw Error("Share '"+e.share+"' is not found");return s.extend({url:this.url,text:this.text},t,e)},this))},_attachWindowResizeCallback:function(){s(e).on("resize",s.proxy(this._windowResizeHandler,this))},_detachWindowResizeCallback:function(){s(e).off("resize",this._windowResizeHandler)},_windowResizeHandler:function(){(s.isFunction(this.showLabel)||s.isFunction(this.showCount))&&(e.clearTimeout(this._resizeTimer),this._resizeTimer=setTimeout(s.proxy(this.refresh,this),this.resizeTimeout))},_render:function(){this._clear(),this._defineOptionsByScreen(),this._$element.addClass(this.elementClass),this._$shares=s("<div>").addClass(this.sharesClass).appendTo(this._$element),this._renderShares()},_defineOptionsByScreen:function(){this._screenWidth=s(e).width(),this._showLabel=a(this.showLabel,this,this._screenWidth),this._showCount=a(this.showCount,this,this._screenWidth)},_renderShares:function(){s.each(this.shares,s.proxy(function(e,s){this._renderShare(s)},this))},_renderShare:function(e){(s.isFunction(e.renderer)?s(e.renderer()):this._createShare(e)).addClass(this.shareClass).addClass(e.share?"jssocials-share-"+e.share:"").addClass(e.css).appendTo(this._$shares)},_createShare:function(e){var t=s("<div>"),r=this._createShareLink(e).appendTo(t);if(this._showCount){var a="inside"===this._showCount,i=a?r:s("<div>").addClass(this.shareCountBoxClass).appendTo(t);i.addClass(a?this.shareLinkCountClass:this.shareCountBoxClass),this._renderShareCount(e,i)}return t},_createShareLink:function(e){var t=this._getShareStrategy(e).call(e,{shareUrl:this._getShareUrl(e)});return t.addClass(this.shareLinkClass).append(this._createShareLogo(e)),this._showLabel&&t.append(this._createShareLabel(e)),s.each(this.on||{},function(r,a){s.isFunction(a)&&t.on(r,s.proxy(a,e))}),t},_getShareStrategy:function(e){var s=u[e.shareIn||this.shareIn];if(!s)throw Error("Share strategy '"+this.shareIn+"' not found");return s},_getShareUrl:function(e){var s=a(e.shareUrl,e);return this._formatShareUrl(s,e)},_createShareLogo:function(e){var t=e.logo,r=i.test(t)?s("<img>").attr("src",e.logo):s("<i>").addClass(t);return r.addClass(this.shareLogoClass),r},_createShareLabel:function(e){return s("<span>").addClass(this.shareLabelClass).text(e.label)},_renderShareCount:function(e,t){var r=s("<span>").addClass(this.shareCountClass);t.addClass(this.shareZeroCountClass).append(r),this._loadCount(e).done(s.proxy(function(e){e&&(t.removeClass(this.shareZeroCountClass),r.text(e))},this))},_loadCount:function(e){var t=s.Deferred(),r=this._getCountUrl(e);if(!r)return t.resolve(0).promise();var a=s.proxy(function(s){t.resolve(this._getCountValue(s,e))},this);return s.getJSON(r).done(a).fail(function(){s.get(r).done(a).fail(function(){t.resolve(0)})}),t.promise()},_getCountUrl:function(e){var s=a(e.countUrl,e);return this._formatShareUrl(s,e)},_getCountValue:function(e,t){var r=(s.isFunction(t.getCount)?t.getCount(e):e)||0;return"string"==typeof r?r:this._formatNumber(r)},_formatNumber:function(e){return s.each(h,function(s,t){if(e>=t)return e=parseFloat((e/t).toFixed(2))+s,!1}),e},_formatShareUrl:function(s,t){return s.replace(n,function(s,r,a){var i=t[a]||"";return i?(r||"")+e.encodeURIComponent(i):""})},_clear:function(){e.clearTimeout(this._resizeTimer),this._$element.empty()},_passOptionToShares:function(e,t){var r=this.shares;s.each(["url","text"],function(a,i){i===e&&s.each(r,function(s,r){r[e]=t})})},_normalizeShare:function(e){return s.isNumeric(e)?this.shares[e]:"string"==typeof e?s.grep(this.shares,function(s){return s.share===e})[0]:e},refresh:function(){this._render()},destroy:function(){this._clear(),this._detachWindowResizeCallback(),this._$element.removeClass(this.elementClass).removeData(r)},option:function(e,s){if(1===arguments.length)return this[e];this[e]=s,this._passOptionToShares(e,s),this.refresh()},shareOption:function(e,s,t){if(e=this._normalizeShare(e),2===arguments.length)return e[s];e[s]=t,this.refresh()}},s.fn.jsSocials=function(e){var t=s.makeArray(arguments).slice(1),a=this;return this.each(function(){var i,n=s(this),h=n.data(r);if(h)if("string"==typeof e){if(void 0!==(i=h[e].apply(h,t))&&i!==h)return a=i,!1}else h._detachWindowResizeCallback(),h._init(e),h._render();else new l(n,e)}),a};var u={popup:function(t){return s("<a>").attr("href","#").on("click",function(){return e.open(t.shareUrl,null,"width=600, height=400, location=0, menubar=0, resizeable=0, scrollbars=0, status=0, titlebar=0, toolbar=0"),!1})},blank:function(e){return s("<a>").attr({target:"_blank",href:e.shareUrl})},self:function(e){return s("<a>").attr({target:"_self",href:e.shareUrl})}};e.jsSocials={Socials:l,shares:o,shareStrategies:u,setDefaults:function(e){var t;s.isPlainObject(e)?t=l.prototype:(t=o[e],e=arguments[1]||{}),s.extend(t,e)}}}(window,jQuery);